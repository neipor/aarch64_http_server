# ANX Development Environment

FROM debian:stable-slim

# Install runtime dependencies & common dev tools
RUN apt-get update && apt-get install -y \
    libssl3 \
    curl \
    && rm -rf /var/lib/apt/lists/*

# Set up our application directory in the container
WORKDIR /app

# Copy certs to the application directory
COPY certs certs

# Create a non-root user to run the server
RUN useradd -ms /bin/bash anxuser
USER anxuser

# Expose ports that ANX will listen on inside the container
EXPOSE 80
EXPOSE 443
EXPOSE 8080

# The CMD will be run from the mounted volume.
# This assumes the project directory is mounted to /app
CMD ["/app/anx", "/app/server.conf"] 